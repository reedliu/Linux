# ç”Ÿä¿¡Linuxå¸¸ç”¨ç³»ç»Ÿæ“ä½œ

> Created by Yunze Liu (Reed Liu)
>
> æ•´ç†çš„éƒ½æ˜¯æ—¥å¸¸å¾ˆå¥½ç”¨ä½†åˆä¸å®¹æ˜“è®°ä½çš„
> è®¸å¤šå‘½ä»¤è¯¦æƒ…å¯ä»¥åœ¨[å‘½ä»¤å¤§å…¨] (http://man.linuxde.net) ä¸­æœç´¢

### å…³äºlinuxç³»ç»Ÿ 

#### æŸ¥çœ‹æ“ä½œç³»ç»Ÿç›¸å…³

```shell
lsb_release -a #ç„¶åå¾—åˆ°è¯¦ç»†ç³»ç»Ÿç‰ˆæœ¬
LSB Version:	:core-4.1-amd64:core-4.1-noarch
Distributor ID:	CentOS
Description:	CentOS Linux release 7.4.1708 (Core) 
Release:	7.4.1708
Codename:	Core
head -n 1 /etc/issue   # æŸ¥çœ‹æ“ä½œç³»ç»Ÿç‰ˆæœ¬
```

```shell
uname -a # å¾—åˆ°linuxä½æ•°
Linux bioinfoplanet 3.10.0-693.2.2.el7.x86_64 #1 SMP Tue Sep 12 22:26:13 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
free -g # æŸ¥çœ‹å†…å­˜
df -h # æŸ¥çœ‹ç¡¬ç›˜æ€»é¢
du -sh # æŸ¥çœ‹å½“å‰ç”¨æˆ·ç”¨é‡ï¼Œæˆ–è€…åŠ ç‰¹å®šæ–‡ä»¶ï¼ˆå¤¹ï¼‰æŸ¥çœ‹å¤§å°
uname -a               # æŸ¥çœ‹å†…æ ¸/æ“ä½œç³»ç»Ÿ/CPUä¿¡æ¯
cat /proc/cpuinfo| grep process | wc -l  # æŸ¥çœ‹CPUä¸ªæ•°
env                    # æŸ¥çœ‹ç¯å¢ƒå˜é‡
```

#### ä»»åŠ¡ç®¡ç†å™¨

```shell
# linuxä¸Šçš„ä»»åŠ¡ç®¡ç†å™¨
ps -ef
# å¦‚æœæƒ³æŸ¥æ‰¾æŸä¸ªä»»åŠ¡ï¼ˆæ¯”å¦‚æ‰¾â€œåŒ…å«sraâ€çš„ï¼‰
ps -ef | grep "sra"
```

#### æ‰¹é‡killè¿›ç¨‹

```shell
#æ‰¹é‡killè¿›ç¨‹
ps -ef | grep "sra" | awk '{print $2}' | while read id;do kill $id; done
```

#### åç¼€

```shell
#basenameå‘½ä»¤æ ¼å¼ï¼š
basename [pathname] [suffix]
basename [string] [suffix]
 
#suffixä¸ºåç¼€ï¼Œå¦‚æœsuffixè¢«æŒ‡å®šäº†ï¼Œbasenameä¼šå°†pathnameæˆ–stringä¸­çš„suffixå»æ‰

$ basename /tmp/test/file.txt
file.txt
$ basename /tmp/test/file.txt .txt
file
```

#### æŸ¥çœ‹ç”¨æˆ·ä½¿ç”¨æ—¶é™

```shell
$ chage -l username 
```

#### æœåŠ¡å™¨è¿ç§»æ•°æ®

```shell
$ rsync -avz  username@login1:/home/username/xxx /home/username/ 
```

#### å°å‘½ä»¤ï¼š

`cd -` ä¸¤ä¸ªè·¯å¾„æ¥å›åˆ‡æ¢ `-`ä»£è¡¨å‰ä¸€ä¸ªç›®å½•

`diff` ç»Ÿè®¡ä¸¤ä¸ªæ–‡ä»¶çš„ä¸åŒ

```shell
diff log2014.log log2013.log  -y -W 50
#ç»“æœè¿”å›
2013-02                 2013-02
2014-03               | 2013-03
2013-07                 2013-07
2013-07               | 2013-08
2013-11               <
2013-12               <
# "|"è¡¨ç¤ºå‰å2ä¸ªæ–‡ä»¶å†…å®¹æœ‰ä¸åŒ
#"<"è¡¨ç¤ºåé¢æ–‡ä»¶æ¯”å‰é¢æ–‡ä»¶å°‘äº†1è¡Œå†…å®¹
#">"è¡¨ç¤ºåé¢æ–‡ä»¶æ¯”å‰é¢æ–‡ä»¶å¤šäº†1è¡Œå†…å®¹
```

`paste` åˆå¹¶æ–‡ä»¶çš„åˆ—

```shell
$ cat a.txt     
bioinfo 520 
$ cat b.txt     
doudou huahua 
$ cat c.txt    
welcome hah 
#ä¸åŠ -s
paste a.txt b.txt c.txt 
bioinfo 520 	doudou huahau	welcome haha
#åŠ ä¸Š-sï¼ˆserial ã€€ä¸²åˆ—è¿›è¡Œè€Œéå¹³è¡Œå¤„ç†ï¼‰
paste -s a.txt b.txt c.txt
bioinfo 520 
doudou huahau
welcome haha
```



`wc` ç»Ÿè®¡è¡Œæ•°ã€è¯æ•°ã€å­—èŠ‚æ•°

> æ™®åŠä¸€ä¸‹å­—èŠ‚ä¸å­—ç¬¦ï¼š
> å­—èŠ‚ï¼ˆBytesï¼‰æ˜¯è®¡é‡å•ä½ï¼Œè¡¨ç¤ºæ•°æ®é‡å¤§å°
> å­—ç¬¦æ˜¯æ–‡å­—å’Œç¬¦å·ï¼Œå¦‚Aã€bã€3ã€@ç­‰
> ä¸åŒçš„ç¼–ç æ–¹å¼ï¼Œä»–ä»¬å¯¹åº”çš„å…³ç³»ä¸åŒï¼š
> **ASCIIç **ä¸­ï¼Œä¸€ä¸ª è‹±æ–‡å­—æ¯ï¼ˆä¸åˆ†å¤§å°å†™ï¼‰å ä¸€ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡å ä¸¤ä¸ªå­—èŠ‚
> **UTF-8ç¼–ç **ä¸­ï¼Œä¸€ä¸ªè‹±æ–‡å­—æ¯ä¸€ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªä¸­æ–‡ï¼ˆåŒ…æ‹¬ç¹ä½“ï¼‰å ä¸‰ä¸ªå­—èŠ‚
> **Unicodeç¼–ç **ä¸­ï¼Œä¸€ä¸ªè‹±æ–‡ä¸¤ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªä¸­æ–‡ä¸¤ä¸ªå­—èŠ‚ï¼›è‹±æ–‡æ ‡ç‚¹å ä¸€ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡æ ‡è¯†å ä¸¤ä¸ª
> **UTF-16ç¼–ç **ä¸­ï¼Œ è‹±æ–‡ä¸ä¸­æ–‡éƒ½è¦ä¸¤ä¸ªå­—èŠ‚
> **UTF-32ç¼–ç **ä¸­ï¼Œä»»ä½•å­—ç¬¦éƒ½è¦4ä¸ªå­—èŠ‚

##### æŸ¥æ‰¾æŒ‡å®šæ–‡ä»¶å¹¶ç»Ÿè®¡è¡Œæ•°ï¼š

```shell
find /PATH/genomes -name "*.fa" -exec wc -l {} \;
# æŸ¥çœ‹æ‰€æœ‰faæ–‡ä»¶çš„è¡Œæ•°
# -exec è¡¨ç¤ºæ‰§è¡Œå‘½ä»¤ï¼ˆexecuteï¼‰
# {}è¡¨ç¤ºå‰é¢æ‰¾åˆ°çš„faæ–‡ä»¶
# ç­‰åŒäºï¼š
find /PATH/genomes -name "*.fa" | xargs wc -l
```

####  è¿›ç¨‹ç®¡ç†ï¼š

* æŸ¥çœ‹è¿›ç¨‹ï¼š
  * è‡ªå¸¦çš„å‘½ä»¤ï¼š `ps aux` æˆ– `top`
  * æ›´å¥½çœ‹æ›´å®ç”¨ï¼š`htop` ï¼ˆéœ€è¦å®‰è£…ï¼‰
* è¿›ç¨‹å¤„ç†ï¼š
  * & æ”¾åˆ°åå°è¿è¡Œï¼š`COMMAND &` 
  * fg æŸ¥çœ‹åå°è¿›ç¨‹
  * ç»ˆæ­¢è¿›ç¨‹ï¼šä¸¤ç§æ–¹æ³•
    * `fg %COMMAND` å…ˆå°†ç¨‹åºæ”¾åˆ°å‰å°ï¼Œç„¶å`ctrl + c`
    * htop ä¸­ `F9`ç›´æ¥ç»“æŸæŸä¸€è¿›ç¨‹
  * å‡å¦‚ä¸€å¼€å§‹å¿˜è®°åŠ &æ”¾åˆ°åå°ï¼Œåæ¥æƒ³æ”¾
    å¯ä»¥å…ˆ`ctrl+z` æš‚åœï¼Œç„¶å `bg` æ”¾åå°

#### å‘½ä»¤ä¼ é€’:

`$()` å…ˆåœ¨æ‹¬å·ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œç„¶åè¿”å›ç»“æœç»™$å‰çš„å‘½ä»¤

> ä¾‹å¦‚ï¼šæ–°å»ºå½“å¤©æ—¥æœŸçš„æ–‡ä»¶å¤¹ï¼š**mkdir $(date +%F)** => 2018-06-06
>
> è¿™æ ·å°±çœå»äº†å…ˆæŸ¥çœ‹æ—¥æœŸï¼Œå†æ‰‹åŠ¨å»ºç«‹æ–‡ä»¶å¤¹çš„æ“ä½œäº†
> %F æ˜¾ç¤ºå®Œæ•´æ—¥æœŸå¹´-æœˆ-æ—¥; æ³¨æ„date åé¢è¦è·Ÿ + 
> ã€%Dæ˜¾ç¤ºæœˆ-æ—¥-å¹´ã€‘
>
> #å¦‚æœåªæ˜¯mkdir $(date)ï¼Œç»“æœä¼šå°†æ—¥æœŸæ‹†åˆ†æˆæ—¥æœŸã€æ˜ŸæœŸã€æ—¶é—´ç­‰å¥½å‡ ä¸ªæ–‡ä»¶å¤¹

æˆ–è€…ç”¨``ä¹Ÿæ˜¯ä¸€æ ·çš„

#### å­—ç¬¦æ›¿æ¢ï¼š

`trå‘½ä»¤`å¯ä»¥å¯¹æ¥è‡ªæ ‡å‡†è¾“å…¥çš„å­—ç¬¦è¿›è¡Œæ›¿æ¢ã€å‹ç¼©å’Œåˆ é™¤

```
# ex.1 æ”¹å˜å¤§å°å†™
echo "HELLO WORLD" | tr 'A-Z' 'a-z'
hello world

# ex.2 -dåˆ é™¤ï¼Œâ€˜ â€™åŒ¹é…è¦åˆ é™¤çš„å†…å®¹
echo "hello 123 world 456" | tr -d '0-9'
hello  world 

# ex.3 -c â€˜0-9 \nâ€™åŒ¹é…é™¤äº†æ•°å­—ã€ç©ºæ ¼å’Œæ¢è¡Œç¬¦ä»¥å¤–çš„å­—ç¬¦ï¼Œç„¶å-dåˆ é™¤
echo aa.,a 1 b#$bb 2 c*/cc 3 ddd 4 | tr -d -c '0-9 \n'
 1  2  3  4
```

#### è·å–è·¯å¾„æ–‡ä»¶åå’Œç›®å½•åï¼š

ç›´æ¥å‘½ä»¤è¡Œè¾“å…¥`basename $(pwd) ` å°±å¾—åˆ°æ–‡ä»¶å
`dirname $(pwd)` å¾—åˆ°ç›®å½•å

> ä¾‹å¦‚ï¼špwdæ˜¯/home/bioinfo/ncbi/blast.sh
> basename $(pwd)å°±å¾—åˆ°blast.sh
> dirname $(pwd)å°±å¾—åˆ° /home/bioinfo/ncbis

#### é‡å‘½åï¼š

> æƒ³æƒ³å§ï¼ŒWindowsç”µè„‘ä¸Šæ‰¹é‡å¤„ç†æ–‡ä»¶åæ˜¯ä¸€ä»¶å¤šä¹ˆéš¾å—çš„å·¥ä½œ

`mv` å¯ä»¥ç”¨ï¼Œä½†æ˜¯åªèƒ½å¯¹å•ä¸ªæ–‡ä»¶å‘½åï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œä½ éœ€è¦rename

`rename åŸå­—ç¬¦ä¸² ç›®æ ‡å­—ç¬¦ä¸² è¦æ›´æ”¹çš„æ–‡ä»¶` å°±æ˜¯ç”±è¿™ä¸‰éƒ¨åˆ†æ„æˆ

> æ”¯æŒé€šé…ç¬¦ï¼šåŸæ¥æœ‰bio1, bio2, ..., bio233
> `ï¼Ÿ` æ›¿ä»£å•ä¸ªå­—ç¬¦ rename bio bio0 bio? => å°† bio1-bio9å˜æˆbio01-bio09
> `*` æ›¿ä»£å¤šä¸ªå­—ç¬¦ rename bio bio0 bio* => å°† bio10-bio90å˜æˆbio010-bio099
> `[]` æ›¿ä»£[]ä¸­çš„ä»»æ„å•ä¸ªå­—ç¬¦ rename bio bio0 bio[2]* => å°†bio200-bio233å˜æˆbio0200-bio0233

>  æ”¯æŒæ­£åˆ™ï¼š
> æ‰¹é‡æ›¿æ¢æ–‡ä»¶åï¼šrename '"s/AA/aa/" * å°†æ‰€æœ‰æ–‡ä»¶åä¸­çš„AAæ›¿æ¢æˆaa
> æ‰¹é‡æ›¿æ¢åç¼€ï¼š rename "s//.html//.php" * å…¨éƒ¨åç¼€æ¢æˆ.php
> æ‰¹é‡åŠ åç¼€ï¼š rename "s/$//.txt" *
> æ‰¹é‡åˆ é™¤æ–‡ä»¶åç¼€ï¼š rename "s//.txt//" *

#### é€šé…ç¬¦wildcardï¼š

ä½¿ç”¨é€šé…ç¬¦çš„æ¨¡å¼å«Globbing(å› ä¸ºæœ€åˆè¢«åº”ç”¨åœ¨ä¸€ä¸ªå«/etc/globçš„æ–‡ä»¶ä¸­)

> 1. åŒ…æ‹¬æ¯”å¦‚`* ? [] {}`
> 2. åˆ é™¤ç›®å½•ä¸­r2ã€d2å¼€å¤´çš„shellè„šæœ¬
>    rm -fr {r2, d2}*.sh 
> 3. æ‹·è´æ–‡ä»¶åˆ°ä¸Šä¸€ä¸ªç›®å½•ã€æ³¨æ„æœ«å°¾çš„ - ã€‘
>    cp /home/tmp/log[0-9].txt  -

#### ä¸‹è½½æ“ä½œï¼š

1. wget [option] URL

   ```
   -o ä»¥æ–°çš„æ–‡ä»¶åä¿å­˜ã€wgeté»˜è®¤ä¼šä»¥æœ€åä¸€ä¸ªç¬¦åˆ/çš„åé¢çš„å­—ç¬¦æ¥å‘½åã€‘
   -c æ–­ç‚¹ç»­ä¼ 
   -b åå°ä¸‹è½½ ã€tail -f wget-logæŸ¥çœ‹ä¸‹è½½è¿›ç¨‹ã€‘
   --tries æ•°å­— ç½‘ç»œæœ‰é—®é¢˜æˆ–ä¸‹è½½ä¸€ä¸ªå¤§æ–‡ä»¶ä¹Ÿæœ‰å¯èƒ½å¤±è´¥ï¼Œé»˜è®¤é‡è¯•20æ¬¡
   -i åŒæ—¶ä¸‹è½½å¤šä¸ªæ–‡ä»¶
   	ã€é¦–å…ˆæ–°å»ºä¸€ä»½ä¸‹è½½é“¾æ¥cat > file.txt, ç„¶åè¾“å…¥å„ä¸ªä¸‹è½½åœ°å€ï¼Œå†ctr+Cé€€å‡ºï¼›ç„¶åç”¨wget -i file.txtå°±å¯ä»¥ã€‘
   
   #ä¾‹å¦‚è¦ä¸‹è½½ncbiçš„ntåº“
   wget -r -c -nH ftp://ftp.ncbi.nih.gov/blast/db/nt.*
   ```

2. curl :ä¾‹å¦‚æˆ‘è¦ä¸‹è½½äººç±»åŸºå› ç»„22å·æŸ“è‰²ä½“æ•°æ®

   ```
   curl http://hgdownload.cse.ucsc.edu/goldenPath/hg38/chromosomes/chr22.fa.gz | gunzip > chr22.fa
   ```

   å…³äºcurlï¼Œå¦‚æœä¸åŠ -oé€‰é¡¹åˆä¸ä½¿ç”¨ç®¡é“ï¼Œä»–ä¼šè‡ªåŠ¨è¾“å‡ºåˆ°å±å¹•ã€‚-oæŒ‡å®šè¾“å‡ºçš„æ–‡ä»¶å

3. prefetchï¼šéœ€è¦å…ˆå®‰è£…sratoolkitå¯ä»¥ä¸‹è½½SRRæ–‡ä»¶ã€‚ä½†æ˜¯å¯èƒ½æœ‰æ—¶ä¸ç¨³å®š
   ä¾‹å¦‚prefetch SRR519926ï¼Œå°±è‡ªåŠ¨ä¸‹è½½åˆ°ï½/ncbi/public/sraä¸­ã€‚

4. axelï¼š å®æµ‹é€Ÿåº¦æ¯”wgetå¿«ä¸¤å€ï¼Œå› ä¸ºä»–æ˜¯å¤šçº¿ç¨‹ä¸‹è½½ï¼Œä½†æ˜¯æ²¡æ–­ç‚¹ç»­ä¼ é€‰é¡¹ï¼Œä¸‹è½½çš„æ•°æ®å®Œæ•´æ€§ä¸å¦‚wget

5. ascpï¼šå¤§æ‰¹é‡ä¸‹è½½SRR/SRA/fqæ–‡ä»¶

   ```
   ascp -v -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh -k 1 -T -l 200m 
   anonftp@ftp-private.ncbi.nlm.nih.gov:
   /sra/sra-instant/reads/ByRun/sra/SRR/SRR949/SRR949627/SRR949627.sra 
   # -v: è®°å½•ç¨‹åºåœ¨å¹²å˜›
   # -iï¼š æä¾›ç§é’¥æ–‡ä»¶çš„åœ°å€ï¼Œåœ°å€ä¸€èˆ¬æ˜¯~/.aspera/connect/etcä¸­çš„asperaweb_id_dsa.opensshæ–‡ä»¶
   # -kï¼šæ–­ç‚¹ç»­ä¼ ï¼Œè®¾ä¸º1
   # -Tï¼šå–æ¶ˆåŠ å¯†ï¼Œå¦åˆ™æœ‰æ—¶ä¸‹è½½å‡ºé”™
   # -lï¼š æœ€å¤§ä¼ è¾“é€Ÿåº¦ï¼Œä¸€èˆ¬200måˆ°500m
   # SRAåœ¨ascpçš„ç”¨æˆ·åæ˜¯anonftpï¼Œæ•°æ®çš„å­˜æ”¾åœ°å€æ˜¯ftp-private.ncbi.nlm.nih.gov
   # æ•°æ®å­˜æ”¾ä¸€èˆ¬éƒ½æ˜¯/sra/sra-instant/reads/ByRun/sra/SRR/SRR***/SRR***###/SRR***###.sra
   ```

   ```
   # æƒ³æ‰¹é‡ä¸‹è½½SRR173010-SRR173015
   for i in {10..15};do ascp -v -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh -k 1 -T -l 200m anonftp@ftp-private.ncbi.nlm.nih.gov:/sra/sra-instant/reads/ByRun/sra/SRR/SRR173/SRR1730"$i"/SRR1730"$i".sra ï½/data;done
   ```


#### Shell:

**ä½¿ç”¨å¤šä¸ªå‘½ä»¤ï¼š** æ”¾åœ¨ä¸€è¡Œï¼Œåˆ†å·åˆ†éš”

**è„šæœ¬æ–‡ä»¶ç¬¬ä¸€è¡Œï¼š** æŒ‡å®šè¦ç”¨çš„shell `#!bin/bash`ã€ç”¨ï¼å‘Šè¯‰shellç”¨å“ªä¸ªè§£é‡Šå™¨ï¼›åªç”¨#æ˜¯æ³¨é‡Šçš„æ„æ€ã€‘

**è¿è¡Œè„šæœ¬æ³¨æ„ï¼š** ç›´æ¥è¿è¡Œå‡ºé”™å¯èƒ½æ˜¯æ²¡æœ‰æƒé™ï¼Œå…ˆæ”¹ä¸‹è„šæœ¬æƒé™ï¼Œä¸€èˆ¬æ–°å»ºå®Œè¦`chmod u+x` ï¼›shellä¼šåœ¨ç¯å¢ƒå˜é‡PATHä¸­æŸ¥æ‰¾è„šæœ¬ï¼Œå¯ä»¥åœ¨å‘½ä»¤æç¤ºç¬¦åé¢ç”¨**ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„å¼•ç”¨è„šæœ¬**

**è®©è„šæœ¬å‘Šè¯‰ç”¨æˆ·ä»–åœ¨å¹²å˜›ï¼š** é€šè¿‡`echo` åŠ ä¸€ä¸ªæ–‡æœ¬ã€å¦‚æœæ–‡æœ¬ä¸­åŒ…å«å­—ç¬¦ä¸²ï¼Œechoåè¦åŠ åŒå¼•å·ã€‘

ã€**è¿™é‡Œä¸ºä½•ç”¨åŒå¼•å·ä¸ç”¨å•å¼•å·ï¼Ÿ**äº‹å®ä¸Šechoä¸¤ä¸ªéƒ½æ”¯æŒï¼Œä½†æ˜¯å¾ˆå¤§çš„ä¸åŒå°±æ˜¯å•å¼•å·æ˜¯å¼ºå¼•ç”¨ï¼Œå®ƒä¼šæŠŠå‘½ä»¤éƒ½å¿½ç•¥æ‰ï¼›ä¸€èˆ¬æˆ‘ä»¬æƒ³è¾“å‡ºå­—ç¬¦ä¸²å°±ä½¿ç”¨åŒå¼•å·å³å¯ã€‘

**æƒ³è®©å­—ç¬¦ä¸²å’Œå‘½ä»¤è¾“å‡ºåœ¨åŒä¸€è¡Œï¼š** `echo -n` ï¼Œå¹¶ä¸”ä¿è¯å­—ç¬¦ä¸²æœ«å°¾æœ‰ä¸€ä¸ªç©ºæ ¼

**å¼•ç”¨å˜é‡ï¼š** 

- ç¯å¢ƒå˜é‡ï¼š
  `env`æ˜¾ç¤ºå…¨å±€å˜é‡ï¼Œ æ¯”å¦‚HOMEï¼ŒUIDç­‰ã€‚è¦åœ¨shellä¸­å¼•ç”¨è¿™äº›å˜é‡ï¼Œåœ¨å‰é¢åŠ ä¸€ä¸ªç¾å…ƒç¬¦å·ï¼Œ`$HOME` ã€`$UID`

  ã€**å®ç”¨ï¼š** æœ‰æ—¶æ‹¿åˆ°çš„æœåŠ¡å™¨ä¸­å®¶ç›®å½•è®¾ç½®å¯èƒ½ä¸å°½å¦‚äººæ„ï¼Œ`cd ~` ç»å¸¸è·‘é”™åœ°æ–¹ğŸ˜±ï¼Œå¦‚ä½•è‡ªå·±ä¿®æ”¹å®¶å½•ï¼Ÿã€‘
  `HOME="æ–°çš„è·¯å¾„"`ï¼Œ`echo $HOME`çœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯æ”¹è¿‡æ¥äº†ã€‚å½“ç„¶è¿™ä¹Ÿåªæ˜¯ä¸´æ—¶çš„ã€‚
  åªæœ‰rootç”¨æˆ·æ‰èƒ½æ°¸ä¹…ä¿®æ”¹ç”¨æˆ·åå’Œå®¶ç›®å½•ï¼Œ`usermod -l  æ–°ç”¨æˆ·å æ—§ç”¨æˆ·å` `sudo usermod -d æ–°å®¶ç›®å½• `

- ç”¨æˆ·å˜é‡ï¼š
  åœ¨shellè„šæœ¬ä¸­å®šä¹‰çš„å˜é‡ï¼Œç”¨ç­‰å·èµ‹å€¼ã€‚**æ³¨æ„âš ï¸ï¼šå˜é‡ã€ç­‰å·ã€å€¼ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼** 
  ã€å¸¸å¸¸ä¼šå› ä¸ºç¾è§‚é—®é¢˜å¿½è§†ã€‘

**ä¸€ä¸ªè„šæœ¬æ¡ˆä¾‹ï¼š** 
![image-20180714114055274](/Users/reedliu1/Library/Mobile Documents/com~apple~CloudDocs/232 - Past Writing | å†å²æ–‡ç« ï¼Œå½’æ¡£é‡æŸ¥/My Writing/ç”Ÿä¿¡Linuxå¸¸ç”¨æ“ä½œ/1.png)

**æ•°å­¦è¿ç®—ï¼š** ä¸€èˆ¬shellè„šæœ¬ä¸­ï¼Œæ•°å­—éƒ½æ˜¯è¢«å½“æˆå­—ç¬¦å¤„ç†çš„ï¼Œæ‰€ä»¥æ•°å­¦è¿ç®—éœ€è¦ç‰¹å®šçš„è¿ç®—å·¥å…·

- æ–¹æ‹¬å·--æ•´æ•°è¿ç®—	ä¾‹å¦‚ï¼Œ`var1=$[2+5] && echo $var1 ` ç»“æœè¿”å›7

- bc(bash caculator)æµ®ç‚¹è¿ç®—ï¼Œæ”¯æŒè®¾ç½®å°æ•°ç‚¹åç²¾åº¦

  ```
  #!/bin/bash
  var=$(echo "scale=4; 2.56/4" | bc)
  echo The result is: $var
  ç»“æœè¿”å›ï¼šThe result is: .6400
  ```

  å¦‚æœè¿›è¡Œå¤§é‡è®¡ç®—ï¼Œä½¿ç”¨<< EOFæ•ˆæœæ›´å¥½ã€æ”¯æŒå¤šæ­¥è¿ç®—ã€‘

  ```
  var=$(bc << EOF
  optionsã€æ¯”å¦‚è®¾ç½®ç²¾åº¦scale=2ã€‘
  statementsã€a1=($var1 * $var2); a2 = ($var2/$var3)ã€‘
  expressionã€è¿ç®— a1 * a2ã€‘
  EOF)
  ```

**è„šæœ¬é€€å‡ºç  $?** 

è¿™æ˜¯ä¸ªä¿¡å·ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡ŒçŠ¶æ€ï¼Œ0æ˜¯æˆåŠŸï¼Œ1-255æ˜¯å„ç§å„æ ·çš„é—®é¢˜

| é€€å‡ºç  |       æ„æ€       |
| :----: | :--------------: |
|   0    |     è¿è¡ŒæˆåŠŸ     |
|   1    |     æœªçŸ¥é”™è¯¯     |
|   2    | shellå‘½ä»¤ä¸é€‚åˆ  |
|  126   |   å‘½ä»¤ä¸å¯æ‰§è¡Œ   |
|  127   |    æ²¡æ‰¾åˆ°å‘½ä»¤    |
|  128   |  æ— æ•ˆçš„é€€å‡ºå‚æ•°  |
|  130   |  é€šè¿‡ctr+Cç»ˆæ­¢   |
|  255   | æ­£å¸¸èŒƒå›´å¤–çš„é€€å‡º |

#### conda:

**åŸºæœ¬é…ç½®ï¼š** `conda config` 
`--add channels` æ·»åŠ å›½å†…é•œåƒæºï¼Œæé«˜ä¸‹è½½é€Ÿåº¦
`--show` æŸ¥çœ‹å·²æœ‰é…ç½®

**æŸ¥çœ‹ç¯å¢ƒ:**  `conda info --env` 

**æ–°å»ºç¯å¢ƒï¼š** `conda create -n xxx python=2 samtools` 
æ–°å»ºä¸€ä¸ªåä¸ºxxxï¼Œpythonç¯å¢ƒä¸º2/3çš„ç¯å¢ƒï¼Œå¹¶å®‰è£…samtoolsçš„è½¯ä»¶

**å¯åŠ¨ç¯å¢ƒï¼š** `conda activate xxx` **åæ¿€æ´»ç¯å¢ƒ** `conda deactivate xxx`

 **åˆ é™¤ç¯å¢ƒ:**`conda remove -n xxx --all` æˆ–è€… `rm -rf /path to conda/xxx`  

**æœç´¢è½¯ä»¶ï¼š** `conda search xxx` 

**ä¸‹è½½æŸä¸ªç‰ˆæœ¬ï¼š** `conda install xxx=2.8.0 -y` å…¶ä¸­-yè¡¨ç¤ºç¡®è®¤



#### ä»å¤´æ–°å»ºæ–°ç”¨æˆ·ï¼š

1ã€ æ–°å»ºä¸€ä¸ªæ²¡æœ‰å®¶ç›®å½•çš„ç”¨æˆ·bioplanet;
â€‹		--> ç»“æœæ˜¯è¯¥ç”¨æˆ·çš„å±ä¸»ã€å±ç»„ä»ç„¶ä¸ºroot

> useradd -M bioplanet

2ã€ å¤åˆ¶/etc/skel ä¸º /home/bioplanet; 
â€‹		â€”> æ·»åŠ æ¶æ„æ–‡ä»¶ä¸ºäº†åœ¨/homeä¸‹è¡¨ç°å‡ºæ¥è¯¥ç”¨æˆ·

> cp  -r  /etc/skel   /home/bioplanet
> ls -la /home/bioplanet çœ‹ä¸‰ä¸ªæ¶æ„æ–‡ä»¶æ˜¯å¦ç”Ÿæˆ

3ã€æ”¹å˜/home/bioplanet åŠå…¶å†…éƒ¨æ–‡ä»¶çš„å±ä¸»å±ç»„å‡ä¸ºbioplanet;

> chown -R bioplanet:bioplanet /home/bioplanet
> #ls -ld /home/bioplanet éªŒè¯

4ã€/home/bioplanetåŠå…¶å†…éƒ¨çš„æ–‡ä»¶ï¼Œå±ç»„å’Œå…¶ä»–ç”¨æˆ·æ²¡æœ‰ä»»ä½•è®¿é—®æƒé™

> æˆ‘ä»¬è¿™é‡Œåªéœ€è¦æ”¹å±ç»„å’Œå…¶ä»–ï¼Œä½¿ç”¨ chmod -R go=  /home/bioplanet

5ã€su bioplanet æ–°å»ºç”¨æˆ·å®Œæˆ, æ¥ä¸‹æ¥è¿˜è¦æ”¹ä¸‰æ ·ä¸œè¥¿
â€‹	è®¾ç½®åŸºæœ¬ç»„ä¸ºbioplanetï¼ˆ5000ï¼‰ï¼Œé™„åŠ ç»„ä¸ºä¹‹å‰å­˜åœ¨çš„mygroup

6ã€ä¿®æ”¹passwd:  

> vi /etc/passwd
> æœ€åä¸€è¡Œæ·»åŠ ï¼š`bioplanet:x:5000:5000::/home/bioplanet:/bin/bash`

7ã€ä¿®æ”¹groupï¼š

> vi /etc/group
> æœ€åä¸€è¡Œæ·»åŠ ï¼š`bioplanet:x:5000:`, å¦å¤–æ‰¾åˆ°mygroupï¼Œåœ¨åé¢æ·»åŠ ä¸Šbioplanet

8ã€passwd [USERNAME]

#### VIM

1. éç¼–è¾‘æ¨¡å¼ä¸‹ï¼Œxåˆ é™¤åä¸€ä¸ªå­—ç¬¦ï¼ŒXåˆ é™¤å‰ä¸€ä¸ªå­—ç¬¦ï¼Œåˆ é™¤3ä¸ªå­—ç¬¦å°±æ˜¯3X/x
2. ä¸é€€å‡ºviç¼–è¾‘å™¨æŸ¥çœ‹å½“å‰ç›®å½•çš„æ–‡ä»¶ï¼š`!pwd` 

#### å…³äºæŸ¥çœ‹

- ä¸è§£å‹å‰æä¸‹æŸ¥çœ‹`zless -SN *.gz`  ã€-Sï¼šåŠ ä¸Šåˆ†éš”ç¬¦tabï¼›-Nï¼šåŠ ä¸Šè¡Œå·ã€‘

#### linuxçš„controlå¿«æ·é”®

- control + ä¸¤æ¬¡iï¼šè¾“å…¥å‘½ä»¤è¾“åˆ°ä¸€åŠå¿˜äº†æ–‡ä»¶å¤¹ä¸‹éœ€è¦ç”¨åˆ°å“ªä¸ªæ–‡ä»¶ï¼Œä¸€èˆ¬æ“ä½œæ˜¯è¿”å›å…ˆå»æŸ¥çœ‹æ–‡ä»¶ï¼Œç„¶åå›å¤´é‡æ–°è¾“å…¥ä¸€éã€‚è¿™ä¸ªå‘½ä»¤è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è¾“å…¥å‘½ä»¤æ•°åˆ°ä¸€åŠï¼ŒåŠæ—¶æŸ¥çœ‹éœ€è¦çš„æ–‡ä»¶

#### å…³äºæ£€æŸ¥Fastqçš„Phredå€¼

```shell
cat file.fq | awk 'NR%4==0' | tr -d '\n' | hexdump -v -e'/1 "%u\n"' | sort -nu
```

è¾“å‡ºç»“æœ **33-93** (Sanger/Illumina1.8), **64-104**(Illumina1.3 or Illumina1.5) and **59-104** (Solexa)

### sed

- å–å‡ºæƒ³è¦çš„è¡Œï¼š`sed '4q;d' file` å–å‡ºç¬¬å››è¡Œ
- åˆ é™¤ç©ºè¡Œä»¥åŠæœ‰ç©ºæ ¼çš„è¡Œï¼š`sed -e '/^$/d' -e '/\s/d' file`
- å…¨å±€æ›¿æ¢ç”¨gï¼Œå¿½ç•¥å¤§å°å†™ç”¨iï¼Œ-iè¡¨ç¤ºä¿®æ”¹æºæ–‡ä»¶`sed -i 's/Re/Ma/gi' file` ã€å¦‚æœåªæƒ³çœ‹çœ‹ç»“æœä¸ä¿®æ”¹æºæ–‡ä»¶ï¼Œå»æ‰-iã€‘
- sedé»˜è®¤æ‰“å°æ‰€æœ‰çš„è¡Œï¼Œä½¿ç”¨-næŒ‡å®šæ‰“å°è¡Œå·ï¼Œå¦‚æ‰“å°å‰å››è¡Œï¼š`sed -n '1~4p' file`   

#### grep

- æ‰¾åˆ°åŒ¹é…æ¨¡å¼åæ‰“å°å‰åå‡ è¡Œï¼š`zcat *.gz| grep -B1 -A2 CACAATGTTT ` è¡¨ç¤ºåŒ¹é…åˆ°CACAATGTTTåå†æ‰“å°å‰1è¡Œï¼ˆB1ï¼‰å’Œåä¸¤è¡Œï¼ˆA2ï¼‰

#### awk

- NRè¡¨ç¤ºè¡Œæ•°ï¼ŒNFè¡¨ç¤ºåˆ—æ•°ï¼š`awk 'NR > 1 && NF == 4' data.txt` ç•¥è¿‡ç¬¬ä¸€è¡Œï¼Œåªå¯¹ç¬¬å››åˆ—å¤„ç†





å‚è€ƒï¼š

https://ucdavis-bioinformatics-training.github.io/2018-March-Bioinformatics-Prerequisites/tuesday/advanced-command-line.html

http://williamslab.bscb.cornell.edu/?page_id=235